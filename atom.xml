<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>時雨のblog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-12-09T12:37:28.528Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>時雨</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CentOS 下的Mysql数据库安全加固</title>
    <link href="http://example.com/2021/12/09/mysql/"/>
    <id>http://example.com/2021/12/09/mysql/</id>
    <published>2021-12-09T02:40:52.000Z</published>
    <updated>2021-12-09T12:37:28.528Z</updated>
    
    <content type="html"><![CDATA[<ol><li>        <h2 id="以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；"   >          <a href="#以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；" class="heading-link"><i class="fas fa-link"></i></a><a href="#以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；" class="headerlink" title="以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；"></a><strong>以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；</strong></h2>      <p>修改Mysql配置文本</p><figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></div></figure><p>在 [mysqld] 下方新增一行 user=mysql (如果没有 mysql 用户需要自行创建)</p><p>修改完后重启Mysql服务</p><figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></div></figure><p><img src="images/1639019584959.png" alt="1639019584959"></p></li><li>        <h2 id="删除默认数据库-test-；"   >          <a href="#删除默认数据库-test-；" class="heading-link"><i class="fas fa-link"></i></a><a href="#删除默认数据库-test-；" class="headerlink" title="删除默认数据库(test)；"></a><strong>删除默认数据库(test)；</strong></h2>      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database test;</span><br></pre></td></tr></table></div></figure><p><img src="images/1639020647125.png" alt="1639020647125"></p><ol start="3"><li>        <h2 id="改变默认Mysql管理员用户为SuperRoot；"   >          <a href="#改变默认Mysql管理员用户为SuperRoot；" class="heading-link"><i class="fas fa-link"></i></a><a href="#改变默认Mysql管理员用户为SuperRoot；" class="headerlink" title="改变默认Mysql管理员用户为SuperRoot；"></a><strong>改变默认Mysql管理员用户为SuperRoot；</strong></h2>      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   use mysql</span><br><span class="line">   update user set user=&#x27;SuperRoot&#x27; where user=&#x27;root&#x27;;</span><br><span class="line">   select user,host from user;</span><br><span class="line">flush privileges; #刷新权限</span><br></pre></td></tr></table></div></figure><p><img src="images/1639030171520.png" alt="1639030171520"></p><p><img src="images/1639030360591.png" alt="1639030360591"></p></li><li>        <h2 id="使用Mysql内置MD5加密函数加密用户user1的密码为-P-ssw0rd1"   >          <a href="#使用Mysql内置MD5加密函数加密用户user1的密码为-P-ssw0rd1" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用Mysql内置MD5加密函数加密用户user1的密码为-P-ssw0rd1" class="headerlink" title="使用Mysql内置MD5加密函数加密用户user1的密码为(P@ssw0rd1!);"></a><strong>使用Mysql内置MD5加密函数加密用户user1的密码为(P@ssw0rd1!);</strong></h2>      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use mysql</span><br><span class="line">select host,user,password from user;</span><br><span class="line">update user set password=password(md5(&#x27;P@ssw0rd1!&#x27;)) where user=&#x27;user1&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></div></figure><p><img src="images/1639032216420.png" alt="1639032216420"></p><p><img src="images/1639032264925.png" alt="1639032264925"></p></li><li>        <h2 id="赋予user用户对数据库所有表只有select-insert-delete-update权限；"   >          <a href="#赋予user用户对数据库所有表只有select-insert-delete-update权限；" class="heading-link"><i class="fas fa-link"></i></a><a href="#赋予user用户对数据库所有表只有select-insert-delete-update权限；" class="headerlink" title="赋予user用户对数据库所有表只有select,insert,delete,update权限；"></a>赋予user用户对数据库所有表只有select,insert,delete,update权限；</h2>      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查看权限</span><br><span class="line">show grants for &#x27;user1&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">#修改权限</span><br><span class="line">grant select,insert,delete,update on *.* to &#x27;user1&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">#刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></div></figure><p><img src="images/1639034859402.png" alt="1639034859402"></p><p><img src="images/1639034904356.png" alt="1639034904356"></p></li><li>        <h2 id="对忘记Mysql数据库SuperRoot管理员密码进行重置操作；"   >          <a href="#对忘记Mysql数据库SuperRoot管理员密码进行重置操作；" class="heading-link"><i class="fas fa-link"></i></a><a href="#对忘记Mysql数据库SuperRoot管理员密码进行重置操作；" class="headerlink" title="对忘记Mysql数据库SuperRoot管理员密码进行重置操作；"></a>对忘记Mysql数据库SuperRoot管理员密码进行重置操作；</h2>      <p>先修改Mysql配置文本my.cnf</p><figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></div></figure><p>在[mysqld]下方新增一行 skip_grant_tables， 然后保存并退出，重启Mysql服务</p><p>直接输入mysql，即可不用密码登录数据库</p><p>进入后修改mysql数据库中的user表，用UPDATE编辑user表</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql</span><br><span class="line">update user set password=&#x27;abc123!&#x27; where user=&#x27;SuperRoot&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></div></figure><p><img src="images/1639035319098.png" alt="1639035319098"></p><p><img src="images/1639035421665.png" alt="1639035421665"></p><p><img src="images/1639035606912.png" alt="1639035606912"></p><p>然后退出mysql，删除my.cnf中刚刚插入的skip_grant_tables,重启Mysql服务，再使用新的密码登录Mysql</p><p><img src="images/1639035954404.png" alt="1639035954404"></p></li><li>        <h2 id="禁用LOCAL-INFILE-命令防止非授权用户访问本地文件；"   >          <a href="#禁用LOCAL-INFILE-命令防止非授权用户访问本地文件；" class="heading-link"><i class="fas fa-link"></i></a><a href="#禁用LOCAL-INFILE-命令防止非授权用户访问本地文件；" class="headerlink" title="禁用LOCAL INFILE 命令防止非授权用户访问本地文件；"></a>禁用LOCAL INFILE 命令防止非授权用户访问本地文件；</h2>      <p>修改Mysql配置文本my.cnf</p><figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></div></figure><p>在[mysqld]下添加一行代码</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local-infile=0</span><br></pre></td></tr></table></div></figure><p><img src="images/1639050657283.png" alt="1639050657283"></p></li><li>        <h2 id="为防止数据库操作信息泄露，请禁止使用Mysql命令行历史记录；"   >          <a href="#为防止数据库操作信息泄露，请禁止使用Mysql命令行历史记录；" class="heading-link"><i class="fas fa-link"></i></a><a href="#为防止数据库操作信息泄露，请禁止使用Mysql命令行历史记录；" class="headerlink" title="为防止数据库操作信息泄露，请禁止使用Mysql命令行历史记录；"></a>为防止数据库操作信息泄露，请禁止使用Mysql命令行历史记录；</h2>      <figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#先删除历史记录文件(如果存在)</span></span><br><span class="line">rm -rf <span class="variable">$HOME</span>/.mysql_history</span><br><span class="line"><span class="comment">#将MYSQL_HISTORY变量设为/dev/null</span></span><br><span class="line">ln -s /dev/null <span class="variable">$HOME</span>/.mysql_history</span><br></pre></td></tr></table></div></figure></li><li>        <h2 id="为了分析数据库运行过程中的一些异常活动，请开启Mysql二进制日志。"   >          <a href="#为了分析数据库运行过程中的一些异常活动，请开启Mysql二进制日志。" class="heading-link"><i class="fas fa-link"></i></a><a href="#为了分析数据库运行过程中的一些异常活动，请开启Mysql二进制日志。" class="headerlink" title="为了分析数据库运行过程中的一些异常活动，请开启Mysql二进制日志。"></a>为了分析数据库运行过程中的一些异常活动，请开启Mysql二进制日志。</h2>      <p>修改mysql配置文件my.cnf，</p><figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></div></figure><p>在[mysqld]下方添加一行代码</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log-bin=mysql-bin</span><br></pre></td></tr></table></div></figure><p><img src="images/1639050085039.png" alt="1639050085039"></p><p>修改完后重启Mysql服务，进入数据库，</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查看Mysql的二进制日志是否开启</span><br><span class="line">show variables like &#x27;%log_bin%&#x27;;</span><br></pre></td></tr></table></div></figure><p><img src="images/1639051256549.png" alt="1639051256549"></p></li></ol></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;
        &lt;h2 id=&quot;以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；&quot;   &gt;
          &lt;a href=&quot;#以普通账户mysql安全运行Mysql，禁止Mysql以管理员账号权限运行；&quot; class=&quot;hea</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>1</title>
    <link href="http://example.com/2021/12/08/ggj/"/>
    <id>http://example.com/2021/12/08/ggj/</id>
    <published>2021-12-08T12:23:57.000Z</published>
    <updated>2021-12-08T12:25:46.789Z</updated>
    
    <content type="html"><![CDATA[<p>食堂泼辣酱</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;食堂泼辣酱&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2021/12/06/hello-world/"/>
    <id>http://example.com/2021/12/06/hello-world/</id>
    <published>2021-12-06T08:17:40.565Z</published>
    <updated>2021-12-06T08:17:40.565Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <span class="exturl"><a class="exturl__link"   href="https://hexo.io/" >Hexo</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>! This is your very first post. Check <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/" >documentation</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> for more info. If you get any problems when using Hexo, you can find the answer in <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/troubleshooting.html" >troubleshooting</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> or you can ask me on <span class="exturl"><a class="exturl__link"   href="https://github.com/hexojs/hexo/issues" >GitHub</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>        <h2 id="Quick-Start"   >          <a href="#Quick-Start" class="heading-link"><i class="fas fa-link"></i></a><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2>              <h3 id="Create-a-new-post"   >          <a href="#Create-a-new-post" class="heading-link"><i class="fas fa-link"></i></a><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3>      <figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></div></figure><p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/writing.html" >Writing</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h3 id="Run-server"   >          <a href="#Run-server" class="heading-link"><i class="fas fa-link"></i></a><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3>      <figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></div></figure><p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/server.html" >Server</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h3 id="Generate-static-files"   >          <a href="#Generate-static-files" class="heading-link"><i class="fas fa-link"></i></a><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3>      <figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></div></figure><p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/generating.html" >Generating</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h3 id="Deploy-to-remote-sites"   >          <a href="#Deploy-to-remote-sites" class="heading-link"><i class="fas fa-link"></i></a><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3>      <figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></div></figure><p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/one-command-deployment.html" >Deployment</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;span class=&quot;exturl&quot;&gt;&lt;a class=&quot;exturl__link&quot;   href=&quot;https://hexo.io/&quot; &gt;Hexo&lt;/a&gt;&lt;span class=&quot;exturl__icon&quot;&gt;&lt;i class=&quot;fas fa-ex</summary>
      
    
    
    
    
  </entry>
  
</feed>
